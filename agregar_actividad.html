{% extends base.html %}

{% block content %}
    <head>
        <meta charset="UTF-8">
        <title>Formulario para agregar actividades</title>
        <style>
            #inputOtro {
                display: none;
            }
            #confirmacion {
                display: none;
            }
            .error {
      color: red;
      font-size: 12px;
    }
        </style>

    </head>
    <body>
        <div>
            <p id="bajada">Ingresa la información de la actividad</p>
            {% if error %}
            <div class="error-message">{{ error }}</div>
            {% endif %}
        </div>
        <div>
        <section>
            <h1>Información del lugar</h1>
            <form>
                <table>
                    <tr>
                        <td><label for="region">Región:</label></td>
                        <td><select name="region" id="region" required>
                            <option value="">--Selecciona una región--</option>
                    </select>
                        </td>
                    </tr>
                    <tr>
                        <td><label for="comuna">Comuna:</label></td>
                        <td><select name="comuna" id="comuna" required>
                            <option value="">--Selecciona una comuna--</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                    <td><label for="sector">Sector:</label></td>
                        <td><input name="sector" id="sector" size="75" maxlength="100">
                        </td>
                    </tr>
                </table>
            </form>
        </section>

        <section>
            <h1>Datos del organizador</h1>
                <form method = "POST">
                    <table>
                        <tr>
                            <td>
                                <label for="nombre">Nombre organizador:</label>
                            </td>
                            <td>
                                <input name="nombre" id="nombre" size="75" maxlength="200" required>
                            </td>
                        </tr>
                        <tr>
                            <td><label for="email">E-mail:</label></td>
                            <td><input name="email" id="email" type="email" oninput="validarEmail()" size="75" maxlength="100" required></td>
                            <td><span id="emailFeedback" style="color:red;"></span></td>
                        </tr>
                        <tr>
                        <td><label for="celular">Número de celular:</label></td>
                        <td><input name="celular" id="celular" type="tel" size="75" maxlength="12" placeholder="+XXX.XXXXXXXX" oninput="validarCelular()"></td>
                        <td><span id="celular_error" class="error"></span></td>
                        </tr>
                    <tr>
                        <td><label for="whatsapp">Contactar por:</label></td>
                        <td><input type="checkbox" name="whatsapp" onclick="revisaCheck(this);"> Whatsapp
                            <input id="whatsapp" type="text" name="whatsapp-id" style="display:none;" minlength="4" maxlength="50">
                            <input type="checkbox" name="instagram" onclick="revisaCheck(this);"> Instagram
                            <input id="instagram" type="text" name="instagram" style="display:none;" minlength="4" maxlength="50">
                            <input type="checkbox" name="telegram" onclick="revisaCheck(this);"> Telegram
                            <input id="telegram" type="text" name="telegram-id" style="display:none;" minlength="4" maxlength="50">
                            <input type="checkbox" name="x" onclick="revisaCheck(this);"> X
                            <input id="x" type="text" name="x-id" style="display:none;" minlength="4" maxlength="50">
                            <input type="checkbox" name="otro" onclick="revisaCheck(this);"> Otro
                            <input id="otro" type="text" name="otro-id" style="display:none;" minlength="4" maxlength="50"></td>


                    </tr>
                        </table>
                </form>
        </section>

        <section>
            <h1>Información de la actividad</h1>
            <form>
                <table>
                    <tr>
                        <td>Día y hora de inicio:</td>
                        <td>
                            <input id="inicio" type="datetime-local" oninput="validarFechas()">
                        </td>
                    </tr>
                    <tr>
                        <td>Día y hora de término:</td>
                        <td>
                            <input id="termino" type="datetime-local" oninput="validarFechas()">
                        </td>
                        <td><span id="fechaFeedback" style="color:red;"></span></td>
                    </tr>
                    <tr>
                        <td>Descripción:</td>
                        <td>
                            <textarea id="descripcion" cols="50" rows="10"></textarea>
                        </td>
                    </tr>
                    <tr>
                        <td>Tema:</td>
                        <td>
                            <select id="tema" onchange="mostrarInput()">
                                <option value="">-- Selecciona --</option>
                                <option value="opcion1">Música</option>
                                <option value="opcion2">Deporte</option>
                                <option value="opcion3">Ciencias</option>
                                <option value="opcion4">Religión</option>
                                <option value="opcion5">Política</option>
                                <option value="opcion6">Tecnología</option>
                                <option value="opcion7">Juegos</option>
                                <option value="opcion8">Baile</option>
                                <option value="opcion9">Comida</option>
                                <option value="otro">Otro</option>
                            </select>
                        </td>
                        <td>
                            <div id="inputOtro">
                                <label for="otro-texto">Especifica:</label>
                                <input type="text" id="otro-texto" name="otro-texto" placeholder="Ingresa tu opción" maxlength="15" minlength="3">
                              </div>
                        </td>
                    </tr>
                    <tr>
                        <td>Fotos:</td>
                        <td>
                            <div id="input_container">
                                <input type="file" id="fotos" name="fotos[]" accept="image/*"><br><br>
                            </div>
                            <p id="mensaje_fotos" style="color:red"></p>
                        </td>
                    </tr>
                </table>
            </form>
        </section>
        <section>
            <h2>Botón de confirmación</h2>
                <button onclick="confirmarAgregar()">Agregar esta actividad</button>
                <div id="confirmacion" class="confirmacion">
                    <div class="mensaje">¿Estás seguro de que deseas agregar esta actividad?</div>
                    <button onclick="agregarActividad()">Sí, agregar</button>
                    <button onclick="cancelarAgregar()">No, cancelar</button>
                  </div>
        </section>
        </div>
{% endblock %}
{% block javascript %}
    <script>

            //Validación región y comuna
            let region_comuna = {
    "regiones": [
        {
        "numero": 1, "nombre": "Región de Tarapacá",
        "comunas": [{"id": 10301, "nombre": "Camiña"}, {"id": 10302, "nombre": "Huara"}, {"id": 10303, "nombre": "Pozo Almonte"}, {"id": 10304, "nombre": "Iquique"}, {"id": 10305, "nombre": "Pica"}, {"id": 10306, "nombre": "Colchane"}, {"id": 10307, "nombre": "Alto Hospicio"}]
        },
        {
        "numero": 2, "nombre": "Región de Antofagasta",
        "comunas": [{"id": 20101, "nombre": "Tocopilla"}, {"id": 20102, "nombre": "Maria Elena"}, {"id": 20201, "nombre": "Ollague"}, {"id": 20202, "nombre": "Calama"}, {"id": 20203, "nombre": "San Pedro Atacama"}, {"id": 20301, "nombre": "Sierra Gorda"}, {"id": 20302, "nombre": "Mejillones"}, {"id": 20303, "nombre": "Antofagasta"}, {"id": 20304, "nombre": "Taltal"}]
        },
        {
        "numero": 3, "nombre": "Región de Atacama",
        "comunas": [{"id": 30101, "nombre": "Diego de Almagro"}, {"id": 30102, "nombre": "Chañaral"}, {"id": 30201, "nombre": "Caldera"}, {"id": 30202, "nombre": "Copiapo"}, {"id": 30203, "nombre": "Tierra Amarilla"}, {"id": 30301, "nombre": "Huasco"}, {"id": 30302, "nombre": "Freirina"}, {"id": 30303, "nombre": "Vallenar"}, {"id": 30304, "nombre": "Alto del Carmen"}]
        },
        {
        "numero": 4, "nombre": "Región de Coquimbo ",
        "comunas": [{"id": 40101, "nombre": "La Higuera"}, {"id": 40102, "nombre": "La Serena"}, {"id": 40103, "nombre": "Vicuña"}, {"id": 40104, "nombre": "Paihuano"}, {"id": 40105, "nombre": "Coquimbo"}, {"id": 40106, "nombre": "Andacollo"}, {"id": 40201, "nombre": "Rio Hurtado"}, {"id": 40202, "nombre": "Ovalle"}, {"id": 40203, "nombre": "Monte Patria"}, {"id": 40204, "nombre": "Punitaqui"}, {"id": 40205, "nombre": "Combarbala"}, {"id": 40301, "nombre": "Mincha"}, {"id": 40302, "nombre": "Illapel"}, {"id": 40303, "nombre": "Salamanca"}, {"id": 40304, "nombre": "Los Vilos"}]
        },
        {
        "numero": 5, "nombre": "Región de Valparaíso",
        "comunas": [{"id": 50101, "nombre": "Petorca"}, {"id": 50102, "nombre": "Cabildo"}, {"id": 50103, "nombre": "Papudo"}, {"id": 50104, "nombre": "La Ligua"}, {"id": 50105, "nombre": "Zapallar"}, {"id": 50201, "nombre": "Putaendo"}, {"id": 50202, "nombre": "Santa Maria"}, {"id": 50203, "nombre": "San Felipe"}, {"id": 50204, "nombre": "Pencahue"}, {"id": 50205, "nombre": "Catemu"}, {"id": 50206, "nombre": "Llay Llay"}, {"id": 50301, "nombre": "Nogales"}, {"id": 50302, "nombre": "La Calera"}, {"id": 50303, "nombre": "Hijuelas"}, {"id": 50304, "nombre": "La Cruz"}, {"id": 50305, "nombre": "Quillota"}, {"id": 50306, "nombre": "Olmue"}, {"id": 50307, "nombre": "Limache"}, {"id": 50401, "nombre": "Los Andes"}, {"id": 50402, "nombre": "Rinconada"}, {"id": 50403, "nombre": "Calle Larga"}, {"id": 50404, "nombre": "San Esteban"}, {"id": 50501, "nombre": "Puchuncavi"}, {"id": 50502, "nombre": "Quintero"}, {"id": 50503, "nombre": "Viña del Mar"}, {"id": 50504, "nombre": "Villa Alemana"}, {"id": 50505, "nombre": "Quilpue"}, {"id": 50506, "nombre": "Valparaiso"}, {"id": 50507, "nombre": "Juan Fernandez"}, {"id": 50508, "nombre": "Casablanca"}, {"id": 50509, "nombre": "Concon"}, {"id": 50601, "nombre": "Isla de Pascua"}, {"id": 50701, "nombre": "Algarrobo"}, {"id": 50702, "nombre": "El Quisco"}, {"id": 50703, "nombre": "El Tabo"}, {"id": 50704, "nombre": "Cartagena"}, {"id": 50705, "nombre": "San Antonio"}, {"id": 50706, "nombre": "Santo Domingo"}]
        },
        {
        "numero": 6, "nombre": "Región del Libertador Bernardo Ohiggins",
        "comunas": [{"id": 60101, "nombre": "Mostazal"}, {"id": 60102, "nombre": "Codegua"}, {"id": 60103, "nombre": "Graneros"}, {"id": 60104, "nombre": "Machali"}, {"id": 60105, "nombre": "Rancagua"}, {"id": 60106, "nombre": "Olivar"}, {"id": 60107, "nombre": "Doñihue"}, {"id": 60108, "nombre": "Requinoa"}, {"id": 60109, "nombre": "Coinco"}, {"id": 60110, "nombre": "Coltauco"}, {"id": 60111, "nombre": "Quinta Tilcoco"}, {"id": 60112, "nombre": "Las Cabras"}, {"id": 60113, "nombre": "Rengo"}, {"id": 60114, "nombre": "Peumo"}, {"id": 60115, "nombre": "Pichidegua"}, {"id": 60116, "nombre": "Malloa"}, {"id": 60117, "nombre": "San Vicente"}, {"id": 60201, "nombre": "Navidad"}, {"id": 60202, "nombre": "La Estrella"}, {"id": 60203, "nombre": "Marchigue"}, {"id": 60204, "nombre": "Pichilemu"}, {"id": 60205, "nombre": "Litueche"}, {"id": 60206, "nombre": "Paredones"}, {"id": 60301, "nombre": "San Fernando"}, {"id": 60302, "nombre": "Peralillo"}, {"id": 60303, "nombre": "Placilla"}, {"id": 60304, "nombre": "Chimbarongo"}, {"id": 60305, "nombre": "Palmilla"}, {"id": 60306, "nombre": "Nancagua"}, {"id": 60307, "nombre": "Santa Cruz"}, {"id": 60308, "nombre": "Pumanque"}, {"id": 60309, "nombre": "Chepica"}, {"id": 60310, "nombre": "Lolol"}]
        },
        {
        "numero": 7, "nombre": "Región del Maule",
        "comunas": [{"id": 70101, "nombre": "Teno"}, {"id": 70102, "nombre": "Romeral"}, {"id": 70103, "nombre": "Rauco"}, {"id": 70104, "nombre": "Curico"}, {"id": 70105, "nombre": "Sagrada Familia"}, {"id": 70106, "nombre": "Hualañe"}, {"id": 70107, "nombre": "Vichuquen"}, {"id": 70108, "nombre": "Molina"}, {"id": 70109, "nombre": "Licanten"}, {"id": 70201, "nombre": "Rio Claro"}, {"id": 70202, "nombre": "Curepto"}, {"id": 70203, "nombre": "Pelarco"}, {"id": 70204, "nombre": "Talca"}, {"id": 70205, "nombre": "Pencahue"}, {"id": 70206, "nombre": "San Clemente"}, {"id": 70207, "nombre": "Constitucion"}, {"id": 70208, "nombre": "Maule"}, {"id": 70209, "nombre": "Empedrado"}, {"id": 70210, "nombre": "San Rafael"}, {"id": 70301, "nombre": "San Javier"}, {"id": 70302, "nombre": "Colbun"}, {"id": 70303, "nombre": "Villa Alegre"}, {"id": 70304, "nombre": "Yerbas Buenas"}, {"id": 70305, "nombre": "Linares"}, {"id": 70306, "nombre": "Longavi"}, {"id": 70307, "nombre": "Retiro"}, {"id": 70308, "nombre": "Parral"}, {"id": 70401, "nombre": "Chanco"}, {"id": 70402, "nombre": "Pelluhue"}, {"id": 70403, "nombre": "Cauquenes"}]
        },
        {
        "numero": 8, "nombre": "Región del Biobío",
        "comunas": [{"id": 80201, "nombre": "Tome"}, {"id": 80202, "nombre": "Florida"}, {"id": 80203, "nombre": "Penco"}, {"id": 80204, "nombre": "Talcahuano"}, {"id": 80205, "nombre": "Concepcion"}, {"id": 80206, "nombre": "Hualqui"}, {"id": 80207, "nombre": "Coronel"}, {"id": 80208, "nombre": "Lota"}, {"id": 80209, "nombre": "Santa Juana"}, {"id": 80210, "nombre": "Chiguayante"}, {"id": 80211, "nombre": "San Pedro de la Paz"}, {"id": 80212, "nombre": "Hualpen"}, {"id": 80301, "nombre": "Cabrero"}, {"id": 80302, "nombre": "Yumbel"}, {"id": 80303, "nombre": "Tucapel"}, {"id": 80304, "nombre": "Antuco"}, {"id": 80305, "nombre": "San Rosendo"}, {"id": 80306, "nombre": "Laja"}, {"id": 80307, "nombre": "Quilleco"}, {"id": 80308, "nombre": "Los Angeles"}, {"id": 80309, "nombre": "Nacimiento"}, {"id": 80310, "nombre": "Negrete"}, {"id": 80311, "nombre": "Santa Barbara"}, {"id": 80312, "nombre": "Quilaco"}, {"id": 80313, "nombre": "Mulchen"}, {"id": 80314, "nombre": "Alto Bio Bio"}, {"id": 80401, "nombre": "Arauco"}, {"id": 80402, "nombre": "Curanilahue"}, {"id": 80403, "nombre": "Los Alamos"}, {"id": 80404, "nombre": "Lebu"}, {"id": 80405, "nombre": "Cañete"}, {"id": 80406, "nombre": "Contulmo"}, {"id": 80407, "nombre": "Tirua"}]
        },
        {
        "numero": 9, "nombre": "Región de La Araucanía",
        "comunas": [{"id": 90101, "nombre": "Renaico"}, {"id": 90102, "nombre": "Angol"}, {"id": 90103, "nombre": "Collipulli"}, {"id": 90104, "nombre": "Los Sauces"}, {"id": 90105, "nombre": "Puren"}, {"id": 90106, "nombre": "Ercilla"}, {"id": 90107, "nombre": "Lumaco"}, {"id": 90108, "nombre": "Victoria"}, {"id": 90109, "nombre": "Traiguen"}, {"id": 90110, "nombre": "Curacautin"}, {"id": 90111, "nombre": "Lonquimay"}, {"id": 90201, "nombre": "Perquenco"}, {"id": 90202, "nombre": "Galvarino"}, {"id": 90203, "nombre": "Lautaro"}, {"id": 90204, "nombre": "Vilcun"}, {"id": 90205, "nombre": "Temuco"}, {"id": 90206, "nombre": "Carahue"}, {"id": 90207, "nombre": "Melipeuco"}, {"id": 90208, "nombre": "Nueva Imperial"}, {"id": 90209, "nombre": "Puerto Saavedra"}, {"id": 90210, "nombre": "Cunco"}, {"id": 90211, "nombre": "Freire"}, {"id": 90212, "nombre": "Pitrufquen"}, {"id": 90213, "nombre": "Teodoro Schmidt"}, {"id": 90214, "nombre": "Gorbea"}, {"id": 90215, "nombre": "Pucon"}, {"id": 90216, "nombre": "Villarrica"}, {"id": 90217, "nombre": "Tolten"}, {"id": 90218, "nombre": "Curarrehue"}, {"id": 90219, "nombre": "Loncoche"}, {"id": 90220, "nombre": "Padre Las Casas"}, {"id": 90221, "nombre": "Cholchol"}]
        },
        {
        "numero": 10, "nombre": "Región de Los Lagos",
        "comunas": [{"id": 100201, "nombre": "San Pablo"}, {"id": 100202, "nombre": "San Juan"}, {"id": 100203, "nombre": "Osorno"}, {"id": 100204, "nombre": "Puyehue"}, {"id": 100205, "nombre": "Rio Negro"}, {"id": 100206, "nombre": "Purranque"}, {"id": 100207, "nombre": "Puerto Octay"}, {"id": 100301, "nombre": "Frutillar"}, {"id": 100302, "nombre": "Fresia"}, {"id": 100303, "nombre": "Llanquihue"}, {"id": 100304, "nombre": "Puerto Varas"}, {"id": 100305, "nombre": "Los Muermos"}, {"id": 100306, "nombre": "Puerto Montt"}, {"id": 100307, "nombre": "Maullin"}, {"id": 100308, "nombre": "Calbuco"}, {"id": 100309, "nombre": "Cochamo"}, {"id": 100401, "nombre": "Ancud"}, {"id": 100402, "nombre": "Quemchi"}, {"id": 100403, "nombre": "Dalcahue"}, {"id": 100404, "nombre": "Curaco de Velez"}, {"id": 100405, "nombre": "Castro"}, {"id": 100406, "nombre": "Chonchi"}, {"id": 100407, "nombre": "Queilen"}, {"id": 100408, "nombre": "Quellon"}, {"id": 100409, "nombre": "Quinchao"}, {"id": 100410, "nombre": "Puqueldon"}, {"id": 100501, "nombre": "Chaiten"}, {"id": 100502, "nombre": "Futaleufu"}, {"id": 100503, "nombre": "Palena"}, {"id": 100504, "nombre": "Hualaihue"}]
        },
        {
        "numero": 11, "nombre": "Región Aisén del General Carlos Ibáñez del Campo",
        "comunas": [{"id": 110101, "nombre": "Guaitecas"}, {"id": 110102, "nombre": "Cisnes"}, {"id": 110103, "nombre": "Aysen"}, {"id": 110201, "nombre": "Coyhaique"}, {"id": 110202, "nombre": "Lago Verde"}, {"id": 110301, "nombre": "Rio Ibañez"}, {"id": 110302, "nombre": "Chile Chico"}, {"id": 110401, "nombre": "Cochrane"}, {"id": 110402, "nombre": "Tortel"}, {"id": 110403, "nombre": "O'Higins"}]
        },
        {
        "numero": 12, "nombre": "Región de Magallanes y la Antártica Chilena",
        "comunas": [{"id": 120101, "nombre": "Torres del Paine"}, {"id": 120102, "nombre": "Puerto Natales"}, {"id": 120201, "nombre": "Laguna Blanca"}, {"id": 120202, "nombre": "San Gregorio"}, {"id": 120203, "nombre": "Rio Verde"}, {"id": 120204, "nombre": "Punta Arenas"}, {"id": 120301, "nombre": "Porvenir"}, {"id": 120302, "nombre": "Primavera"}, {"id": 120303, "nombre": "Timaukel"}, {"id": 120401, "nombre": "Antartica"}]
        },
        {
        "numero": 13, "nombre": "Región Metropolitana de Santiago ",
        "comunas": [{"id": 130101, "nombre": "Tiltil"}, {"id": 130102, "nombre": "Colina"}, {"id": 130103, "nombre": "Lampa"}, {"id": 130201, "nombre": "Conchali"}, {"id": 130202, "nombre": "Quilicura"}, {"id": 130203, "nombre": "Renca"}, {"id": 130204, "nombre": "Las Condes"}, {"id": 130205, "nombre": "Pudahuel"}, {"id": 130206, "nombre": "Quinta Normal"}, {"id": 130207, "nombre": "Providencia"}, {"id": 130208, "nombre": "Santiago"}, {"id": 130209, "nombre": "La Reina"}, {"id": 130210, "nombre": "Ñuñoa"}, {"id": 130211, "nombre": "San Miguel"}, {"id": 130212, "nombre": "Maipu"}, {"id": 130213, "nombre": "La Cisterna"}, {"id": 130214, "nombre": "La Florida"}, {"id": 130215, "nombre": "La Granja"}, {"id": 130216, "nombre": "Independencia"}, {"id": 130217, "nombre": "Huechuraba"}, {"id": 130218, "nombre": "Recoleta"}, {"id": 130219, "nombre": "Vitacura"}, {"id": 130220, "nombre": "Lo Barrenechea"}, {"id": 130221, "nombre": "Macul"}, {"id": 130222, "nombre": "Peñalolen"}, {"id": 130223, "nombre": "San Joaquin"}, {"id": 130224, "nombre": "La Pintana"}, {"id": 130225, "nombre": "San Ramon"}, {"id": 130226, "nombre": "El Bosque"}, {"id": 130227, "nombre": "Pedro Aguirre Cerda"}, {"id": 130228, "nombre": "Lo Espejo"}, {"id": 130229, "nombre": "Estacion Central"}, {"id": 130230, "nombre": "Cerrillos"}, {"id": 130231, "nombre": "Lo Prado"}, {"id": 130232, "nombre": "Cerro Navia"}, {"id": 130301, "nombre": "San Jose de Maipo"}, {"id": 130302, "nombre": "Puente Alto"}, {"id": 130303, "nombre": "Pirque"}, {"id": 130401, "nombre": "San Bernardo"}, {"id": 130402, "nombre": "Calera de Tango"}, {"id": 130403, "nombre": "Buin"}, {"id": 130404, "nombre": "Paine"}, {"id": 130501, "nombre": "Peñaflor"}, {"id": 130502, "nombre": "Talagante"}, {"id": 130503, "nombre": "El Monte"}, {"id": 130504, "nombre": "Isla de Maipo"}, {"id": 130601, "nombre": "Curacavi"}, {"id": 130602, "nombre": "Maria Pinto"}, {"id": 130603, "nombre": "Melipilla"}, {"id": 130604, "nombre": "San Pedro"}, {"id": 130605, "nombre": "Alhue"}, {"id": 130606, "nombre": "Padre Hurtado"}]
        },
        {
        "numero": 14, "nombre": "Región de Los Ríos",
        "comunas": [{"id": 100101, "nombre": "Lanco"}, {"id": 100102, "nombre": "Mariquina"}, {"id": 100103, "nombre": "Panguipulli"}, {"id": 100104, "nombre": "Mafil"}, {"id": 100105, "nombre": "Valdivia"}, {"id": 100106, "nombre": "Los Lagos"}, {"id": 100107, "nombre": "Corral"}, {"id": 100108, "nombre": "Paillaco"}, {"id": 100109, "nombre": "Futrono"}, {"id": 100110, "nombre": "Lago Ranco"}, {"id": 100111, "nombre": "La Union"}, {"id": 100112, "nombre": "Rio Bueno"}]
        },
        {
        "numero": 15, "nombre": "Región Arica y Parinacota",
        "comunas": [{"id": 10101, "nombre": "Gral. Lagos"}, {"id": 10102, "nombre": "Putre"}, {"id": 10201, "nombre": "Arica"}, {"id": 10202, "nombre": "Camarones"}]
        },
        {
        "numero": 16, "nombre": "Región del Ñuble",
        "comunas": [{"id": 80101, "nombre": "Cobquecura"}, {"id": 80102, "nombre": "Ñiquen"}, {"id": 80103, "nombre": "San Fabian"}, {"id": 80104, "nombre": "San Carlos"}, {"id": 80105, "nombre": "Quirihue"}, {"id": 80106, "nombre": "Ninhue"}, {"id": 80107, "nombre": "Trehuaco"}, {"id": 80108, "nombre": "San Nicolas"}, {"id": 80109, "nombre": "Coihueco"}, {"id": 80110, "nombre": "Chillan"}, {"id": 80111, "nombre": "Portezuelo"}, {"id": 80112, "nombre": "Pinto"}, {"id": 80113, "nombre": "Coelemu"}, {"id": 80114, "nombre": "Bulnes"}, {"id": 80115, "nombre": "San Ignacio"}, {"id": 80116, "nombre": "Ranquil"}, {"id": 80117, "nombre": "Quillon"}, {"id": 80118, "nombre": "El Carmen"}, {"id": 80119, "nombre": "Pemuco"}, {"id": 80120, "nombre": "Yungay"}, {"id": 80121, "nombre": "Chillan Viejo"}]
        }
    ]
};
            const regionSelect = document.getElementById("region");
            const comunaSelect = document.getElementById("comuna");

            region_comuna.regiones.forEach(rn => {
                const opcion = document.createElement("option");
                opcion.value = rn.numero;
                opcion.textContent = rn.nombre; 
                regionSelect.appendChild(opcion);  
            });

            regionSelect.addEventListener("change", function () {
                const numeroSeleccionado = parseInt(this.value);

                // Limpiar comunas anteriores
                comunaSelect.innerHTML = '<option value="">--Selecciona una comuna--</option>';
                // Buscar la región correspondiente
                const region = region_comuna.regiones.find(r => r.numero === numeroSeleccionado);

                if (region && region.comunas) {
                region.comunas.forEach(comuna => {
                    const opcion = document.createElement("option");
                    opcion.value = comuna.id;
                    opcion.textContent = comuna.nombre;
                    comunaSelect.appendChild(opcion);
                });
                }
                });
            //Validación e-mail

            function validarEmail(){
                const emailInput = document.getElementById("email");
                const feedback = document.getElementById("emailFeedback");
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                const valorEmail = emailInput.value.trim();
                if (emailRegex.test(valorEmail)){
                    feedback.textContent = "";
                }else{
                    feedback.textContent = "Por favor, ingrese un email valido"
                }
            
            }
            // Validación telefono
            function validarCelular(){
                const celularInput = document.getElementById("celular");
                const mensajeError = document.getElementById("celular_error");
                const telefonoRegex = /^\+?[1-9]\d{1,14}$/;
                const valorCelular = celularInput.value.trim();

                if (telefonoRegex.test(valorCelular)) {
                    mensajeError.textContent = "";
                } else {
                    mensajeError.textContent = "Por favor, ingresa un número de teléfono válido.";
                }
        }



            function revisaCheck(element){
                if (element.checked) {
                     document.getElementById(element.name).style.display = "block";
                } else {
                    document.getElementById(element.name).style.display = "none";
                }
            }
           //Validación tema
            function mostrarInput(){
                const select = document.getElementById("tema")
                const input = document.getElementById("inputOtro");
                if (select.value ==="otro"){
                    input.style.display = "block";
                } else {
                    input.style.display = "none";
                    input.value = "";
                }
            }

            //Validación fotos
            const MAX_FOTOS = 5;

           function agregarInput(input) {
            const container = document.getElementById("input_container");
            const inputs = container.querySelectorAll("input[type='file']");
            const mensaje = document.getElementById("mensaje_fotos");

            // Contar solo los inputs que ya tienen un archivo seleccionado
            let cantidadConArchivo = 0;
            inputs.forEach(inp => {
                if (inp.files.length > 0) cantidadConArchivo++;
            });

            if (cantidadConArchivo >= MAX_FOTOS) {
                mensaje.textContent = "Has alcanzado el máximo de 5 fotos.";
                return;
            }

            // Agrega nuevo input solo si este input tiene archivos
            if (input.files.length > 0 && cantidadConArchivo < MAX_FOTOS) {
                const nuevoInput = document.createElement("input");
                nuevoInput.type = "file";
                nuevoInput.name = "fotos[]";
                nuevoInput.accept = "image/*";
                nuevoInput.onchange = function () { agregarInput(nuevoInput); };
                container.appendChild(nuevoInput);
                container.appendChild(document.createElement("br"));
                container.appendChild(document.createElement("br"));

                mensaje.textContent = "";
            }
        }

            //Validación fecha
            const fechaActual = new Date();
    
            // Formatear la fecha en el formato adecuado para el input datetime-local
            const año = fechaActual.getFullYear();
            const mes = String(fechaActual.getMonth() + 1).padStart(2, '0'); // Mes de 2 dígitos
            const dia = String(fechaActual.getDate()).padStart(2, '0'); // Día de 2 dígitos
            const horas = String(fechaActual.getHours()).padStart(2, '0'); // Horas de 2 dígitos
            const minutos = String(fechaActual.getMinutes()).padStart(2, '0'); // Minutos de 2 dígitos

            // Formatear la fecha y hora en el formato requerido por el input datetime-local
            const fechaHoraFormateada = `${año}-${mes}-${dia}T${horas}:${minutos}`;

            // Asignar la fecha y hora formateada al input
            document.getElementById("inicio").value = fechaHoraFormateada;

            function validarFechas() {
                const inicio = document.getElementById("inicio").value;
                const termino = document.getElementById("termino").value;
                const feedback = document.getElementById("fechaFeedback");

                if (!inicio || !termino) {
                    feedback.textContent = ""; // no validar si están vacíos
                    return;
                }

                const fechaInicio = new Date(inicio);
                const fechaTermino = new Date(termino);

                if (fechaTermino <= fechaInicio) {
                    feedback.textContent = "La fecha de término debe ser posterior a la de inicio.";
                } else {
                    feedback.textContent = "";
                }
                }

            //Boton de confirmación
            function confirmarAgregar() {
            // Mostrar el cuadro de confirmación personalizado
            document.getElementById("confirmacion").style.display = "block";
            }
            

            function agregarActividad() {
            // Aquí puedes agregar la lógica para agregar la actividad
            alert("Actividad agregada correctamente.");
            cerrarConfirmacion();
            window.location.href = "index.html";
            }

            function cancelarAgregar() {
            alert("Actividad no agregada.");
            cerrarConfirmacion();
            }

            function cerrarConfirmacion() {
            // Ocultar el cuadro de confirmación
            document.getElementById("confirmacion").style.display = "none";
            }
            
        </script>
    </body>
{% endblock %}